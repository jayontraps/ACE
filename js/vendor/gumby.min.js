!function(a){"use strict";function b(){this.$dom=a(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"===a("script[gumby-init]").attr("gumby-init")?!1:!0,this.debugMode=Boolean(a("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number(a("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var b=a("script[gumby-touch]").attr("gumby-touch"),c=a("script[gumby-path]").attr("gumby-path");"false"===b?this.touchEvents=!1:b?this.touchEvents=b:c&&(this.touchEvents=c),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&a(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}b.prototype.init=function(a){var b=this,c=a?a:{};return this.$dom.ready(function(){c.debug&&(b.debugMode=!0),b.debug("Initializing Gumby");var a=c.uiModules?c.uiModules:!1;b.initUIModules(a),b.onReady&&b.onReady(),b.isOldie&&b.onOldie&&b.onOldie(),Modernizr.touch&&b.onTouch&&b.onTouch()}),this},b.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touch&&this.onTouch&&this.onTouch()},b.prototype.ready=function(a){return a&&"function"==typeof a&&(this.onReady=a),this},b.prototype.oldie=function(a){return a&&"function"==typeof a&&(this.onOldie=a),this},b.prototype.touch=function(a){return a&&"function"==typeof a&&(this.onTouch=a),this},b.prototype.console=function(a,b){this.debugMode&&window.console&&console[console[a]?a:"log"](b.length>1?Array.prototype.slice.call(b):b[0])},b.prototype.log=function(){this.console("log",arguments)},b.prototype.debug=function(){this.console("debug",arguments)},b.prototype.warn=function(){this.console("warn",arguments)},b.prototype.error=function(){this.console("error",arguments)},b.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},b.prototype.selectAttr=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],c="data-"+arguments[a],d="gumby-"+arguments[a];if(this.is("["+c+"]"))return this.attr(c)?this.attr(c):!0;if(this.is("["+d+"]"))return this.attr(d)?this.attr(d):!0;if(this.is("["+b+"]"))return this.attr(b)?this.attr(b):!0}return!1},b.prototype.addInitalisation=function(a,b){this.inits[a]=b},b.prototype.initialize=function(a,b){if("object"==typeof a){var c=0;for(c;c<a.length;c++)this.inits[a[c]]&&"function"==typeof this.inits[a[c]]?this.inits[a[c]](b):this.error("Error initializing module: "+a[c])}else this.inits[a]&&"function"==typeof this.inits[a]?this.inits[a](b):this.error("Error initializing module: "+a);return this},b.prototype.UIModule=function(a){var b=a.module;this.uiModules[b]=a},b.prototype.initUIModules=function(a){var b,c,d=this.uiModules;a&&(d=a);for(b in d)c=a?d[b]:b,this.uiModules[c].init()},window.Gumby=new b}(jQuery),!function(a){"use strict";Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){a.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery),!function(){"use strict";function a(a){Gumby.debug("Initializing Parallax",a),this.$el=a,this.$holder={},this.ratio=this.offset=0;var b=this;this.setup(),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Parallax",b.$el),b.setup()}),this.setPosition(),this.$holder.scroll(function(){b.scroll()}),this.scroll()}Gumby.gumbyTouch||(a.prototype.setup=function(){this.$holder=Gumby.selectAttr.apply(this.$el,["holder"]),this.ratio=Number(Gumby.selectAttr.apply(this.$el,["parallax"]))||1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.xPos=this.$el.css("backgroundPosition").split(" ")[0],this.xPos&&"0%"!==this.xPos||(this.xPos="50%"),this.startPos=(this.$el.offset().top-this.offset)*this.ratio,this.$holder&&(this.$holder=$(this.$holder)),this.$holder&&this.$holder.length?this.startPos-=this.$holder.offset().top:this.$holder=$(window)},a.prototype.scroll=function(){this.setPosition(this.startPos-this.$holder.scrollTop()*this.ratio)},a.prototype.setPosition=function(a){this.$el.css("backgroundPosition",this.xPos+" "+a+"px")},Gumby.addInitalisation("parallax",function(){$(".parallax").each(function(){var b=$(this);return b.data("isParallax")?!0:(b.data("isParallax",!0),void new a(b))})}),Gumby.UIModule({module:"parallax",events:[],init:function(){Gumby.initialize("parallax")}}))}(),!function(a){"use strict";function b(b){Gumby.debug("Initializing Fixed Position",b),this.$el=b,this.$window=a(window),this.fixedPoint="",this.pinPoint=!1,this.fixedPointjQ=!1,this.pinPointjQ=!1,this.offset=0,this.pinOffset=0,this.top=0,this.constrainEl=!0,this.state=!1,this.measurements={left:0,width:0},this.setup();var c=this;this.$window.on("scroll load",function(){c.monitorScroll()}),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Fixed Position",b),c.setup(),c.monitorScroll()})}b.prototype.setup=function(){var a=this;this.fixedPoint=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["fixed"])),this.pinPoint=Gumby.selectAttr.apply(this.$el,["pin"])||!1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.pinOffset=Number(Gumby.selectAttr.apply(this.$el,["pinoffset"]))||0,this.top=Number(Gumby.selectAttr.apply(this.$el,["top"]))||0,this.constrainEl=Gumby.selectAttr.apply(this.$el,["constrain"])||!0,"false"===this.constrainEl&&(this.constrainEl=!1),this.$parent=this.$el.parents(".columns, .column, .row"),this.$parent=this.$parent.length?this.$parent.first():!1,this.parentRow=this.$parent?!!this.$parent.hasClass("row"):!1,this.pinPoint&&(this.pinPoint=this.parseAttrValue(this.pinPoint)),this.fixedPointjQ=this.fixedPoint instanceof jQuery,this.pinPointjQ=this.pinPoint instanceof jQuery,this.$parent&&this.constrainEl&&(this.measure(),this.$window.resize(function(){a.state&&(a.measure(),a.constrain())}))},b.prototype.monitorScroll=function(){var a=this.$window.scrollTop(),b=this.fixedPointjQ?this.fixedPoint.offset().top:this.fixedPoint,c=!1;this.pinPoint&&(c=this.pinPointjQ?this.pinPoint.offset().top:this.pinPoint),this.offset&&(b-=this.offset),this.pinOffset&&(c-=this.pinOffset),a>=b&&"fixed"!==this.state?(!c||c>a)&&this.fix():b>a&&"fixed"===this.state?this.unfix():c&&a>=c&&"pinned"!==this.state&&this.pin()},b.prototype.fix=function(){Gumby.debug("Element has been fixed",this.$el),Gumby.debug("Triggering onFixed event",this.$el),this.state="fixed",this.$el.css({top:this.top}).addClass("fixed").removeClass("unfixed pinned").trigger("gumby.onFixed"),this.$parent&&this.constrain()},b.prototype.unfix=function(){Gumby.debug("Element has been unfixed",this.$el),Gumby.debug("Triggering onUnfixed event",this.$el),this.state="unfixed",this.$el.addClass("unfixed").removeClass("fixed pinned").trigger("gumby.onUnfixed")},b.prototype.pin=function(){Gumby.debug("Element has been pinned",this.$el),Gumby.debug("Triggering onPinned event",this.$el),this.state="pinned",this.$el.css({top:this.$el.offset().top}).addClass("pinned fixed").removeClass("unfixed").trigger("gumby.onPinned")},b.prototype.constrain=function(){Gumby.debug("Constraining element",this.$el),this.$el.css({left:this.measurements.left,width:this.measurements.width})},b.prototype.measure=function(){var a;this.measurements.left=this.$parent.offset().left,this.measurements.width=this.$parent.width(),this.parentRow&&(a=Number(this.$parent.css("paddingLeft").replace(/px/,"")),a&&(this.measurements.left+=a))},b.prototype.parseAttrValue=function(b){if(a.isNumeric(b))return Number(b);if("top"===b)return this.$el.offset().top;var c=a(b);return c.length?c:(Gumby.error("Cannot find Fixed target: "+b),!1)},Gumby.addInitalisation("fixed",function(c){a("[data-fixed],[gumby-fixed],[fixed]").each(function(){var d=a(this);return d.data("isFixed")&&!c?!0:d.data("isFixed")&&c?(d.trigger("gumby.initialize"),!0):(d.data("isFixed",!0),void new b(d))})}),Gumby.UIModule({module:"fixed",events:["initialize","onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}(jQuery),!function(a){"use strict";function b(a){Gumby.debug("Initializing Skiplink",a),this.$el=a,this.targetPos=0,this.duration=0,this.offset=!1,this.easing="",this.update=!1,this.setup();var b=this;this.$el.on(Gumby.click+" gumby.skip",function(a){a.preventDefault(),"skip"===a.namespace&&Gumby.debug("Skip event triggered",b.$el),b.update?b.calculateTarget(b.skipTo):b.skipTo()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing Skiplink",b.$el),b.setup()})}b.prototype.setup=function(){this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200,this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||!1,this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing",this.update=Gumby.selectAttr.apply(this.$el,["update"])?!0:!1,this.calculateTarget()},b.prototype.calculateTarget=function(b){var c,d=Gumby.selectAttr.apply(this.$el,["goto"]);if("top"==d)this.targetPos=0;else if(a.isNumeric(d))this.targetPos=Number(d);else{if(c=a(d),!c.length)return Gumby.error("Cannot find skiplink target: "+d),!1;this.targetPos=c.offset().top}b&&b.apply(this)},b.prototype.skipTo=function(){Gumby.debug("Skipping to target",this.$el);var b=this;a("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){Gumby.debug("Triggering onComplete event",b.$el),b.$el.trigger("gumby.onComplete")})},b.prototype.calculateOffset=function(){if(!this.offset)return this.targetPos;var a=this.offset.substr(0,1),b=Number(this.offset.substr(1,this.offset.length));return"-"===a?this.targetPos-b:"+"===a?this.targetPos+b:void 0},Gumby.addInitalisation("skiplink",function(c){a(".skiplink > a, .skip").each(function(){var d=a(this);return d.data("isSkipLink")&&!c?!0:d.data("isSkipLink")&&c?(d.trigger("gumby.initialize"),!0):(d.data("isSkipLink",!0),void new b(d))})}),Gumby.UIModule({module:"skiplink",events:["initialize","onComplete","skip"],init:function(){Gumby.initialize("skiplink")}})}(jQuery);